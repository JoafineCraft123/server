<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Simple Python Runner</title>
<script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
<style>
  body { font-family: monospace; padding: 20px; }
  textarea { width: 100%; height: 200px; font-family: monospace; font-size: 14px; }
  pre { background: #eee; padding: 10px; min-height: 100px; white-space: pre-wrap; }
  button { margin-top: 10px; padding: 10px 15px; font-size: 16px; }
</style>
</head>
<body>

<h2>Python Runner (Pyodide in-browser)</h2>

<textarea id="code">print("Hello World!")</textarea><br />
<button id="runBtn">Run Code</button>

<h3>Output:</h3>
<pre id="output">(no output)</pre>

<script>
let pyodideReady = false;
let pyodide = null;

async function loadPyodideAndPackages() {
  pyodide = await loadPyodide({
    indexURL : "https://cdn.jsdelivr.net/pyodide/v0.23.4/full/"
  });
  pyodideReady = true;
}

async function runCode() {
  if (!pyodideReady) {
    alert("Python runtime is still loading, please wait...");
    return;
  }
  const code = document.getElementById("code").value;
  try {
    pyodide.runPython(`
import sys
import io
sys.stdout = io.StringIO()
sys.stderr = sys.stdout
`);
    await pyodide.runPythonAsync(code);
    let output = pyodide.runPython("sys.stdout.getvalue()");
    if (!output) output = "(no output)";
    document.getElementById("output").textContent = output;
  } catch (err) {
    document.getElementById("output").textContent = "Error:\n" + err;
  }
}

document.getElementById("runBtn").onclick = runCode;

loadPyodideAndPackages();
</script>

</body>
</html>
