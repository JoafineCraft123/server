<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Python Runner</title>
<style>
  body { background:#1e1e1e; color:#eee; font-family: monospace; margin:0; padding:10px;}
  textarea { width:100%; height:200px; background:#2d2d2d; color:#eee; border:none; padding:10px; font-size:16px; }
  #output { background:#121212; padding:10px; height:150px; overflow:auto; white-space: pre-wrap; margin-top:10px;}
  input, button { font-size: 16px; margin-top: 10px; padding: 8px; border-radius: 5px; border:none; }
  input { width: 200px; }
  button { background:#0a84ff; color:#fff; cursor:pointer; }
</style>
</head>
<body>

<h2>Python Online Runner</h2>

<textarea id="code" spellcheck="false" placeholder="Write your Python code here...">print("Hello, world!")</textarea><br/>
<button id="run">Run Code</button>

<div id="output">(Output will appear here)</div>

<hr/>

<label for="pkg">Install Python Package:</label><br/>
<input type="text" id="pkg" placeholder="e.g. discord.py" />
<button id="install">Install Package</button>

<div id="installStatus"></div>

<script>
  const backendUrl = 'https://seu-backend-python-aqui.com'; // ALTERE para o seu backend

  const runBtn = document.getElementById('run');
  const codeArea = document.getElementById('code');
  const outputDiv = document.getElementById('output');

  const installBtn = document.getElementById('install');
  const pkgInput = document.getElementById('pkg');
  const installStatus = document.getElementById('installStatus');

  runBtn.onclick = async () => {
    outputDiv.textContent = "Running...";
    const code = codeArea.value;
    try {
      const res = await fetch(`${backendUrl}/run`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({code})
      });
      const data = await res.json();
      if(data.error){
        outputDiv.textContent = "Error:\n" + data.error;
      } else {
        outputDiv.textContent = data.output || "(no output)";
      }
    } catch(e) {
      outputDiv.textContent = "Failed to connect to server.";
    }
  };

  installBtn.onclick = async () => {
    const pkg = pkgInput.value.trim();
    if(!pkg){
      installStatus.textContent = "Enter a package name!";
      return;
    }
    installStatus.textContent = "Installing...";
    try {
      const res = await fetch(`${backendUrl}/install`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({package: pkg})
      });
      const data = await res.json();
      if(data.success){
        installStatus.textContent = `Package "${pkg}" installed successfully!`;
      } else {
        installStatus.textContent = `Failed to install "${pkg}": ${data.message || 'unknown error'}`;
      }
    } catch(e) {
      installStatus.textContent = "Failed to connect to server.";
    }
  };
</script>

</body>
</html>
